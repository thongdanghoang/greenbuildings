<div
    class="mt-6 w-full max-w-lg rounded-2xl bg-white shadow-xl sm:max-w-xl md:max-w-2xl dark:bg-gray-800"
>
    <!-- Dialog Header -->
    <div
        class="flex items-center justify-between rounded-t-2xl border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 dark:border-gray-700 dark:from-indigo-900 dark:to-purple-900"
    >
        <span
            class="flex items-center gap-3 text-xl font-bold text-indigo-800 dark:text-indigo-200"
        >
            <i
                class="pi pi-wallet text-2xl text-indigo-600 dark:text-indigo-400"
            ></i>
            {{ "paymentDetail.header" | translate }}
        </span>
        <button
            pButton
            type="button"
            icon="pi pi-times"
            class="rounded-full p-2"
            (click)="closeDialog()"
        ></button>
    </div>

    <!-- Dialog Content -->
    <div class="p-6">
        <!-- Loading State -->
        <ng-container *ngIf="loading">
            <div class="flex h-64 items-center justify-center">
                <p-progressSpinner
                    styleClass="h-12 w-12 text-indigo-600 dark:text-indigo-400"
                    strokeWidth="4"
                    animationDuration="1s"
                ></p-progressSpinner>
            </div>
        </ng-container>

        <!-- Payment Details -->
        <ng-container *ngIf="!loading && paymentDetail">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                <!-- Created Date -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-calendar text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.createdDate" | translate }}
                    </label>
                    <p class="mt-2 text-base text-gray-900 dark:text-gray-100">
                        {{
                            paymentDetail.createdDate ||
                                ("paymentDetail.fallback.na" | translate)
                        }}
                    </p>
                </div>

                <!-- Status -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-check-circle text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.status" | translate }}
                    </label>
                    <p class="mt-2 text-base">
                        <span
                            [ngClass]="getStatusClass(paymentDetail.status)"
                            class="inline-block rounded-full bg-indigo-100 px-3 py-1 text-sm font-medium text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"
                        >
                            {{
                                "enum.status.payment." + paymentDetail.status
                                    | translate
                            }}
                        </span>
                    </p>
                </div>

                <!-- Amount -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-dollar text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.amount" | translate }}
                    </label>
                    <p
                        class="mt-2 text-base font-semibold text-gray-900 dark:text-gray-100"
                    >
                        {{ formatAmount(paymentDetail.amount) }}
                        {{ paymentDetail.currency }}
                    </p>
                </div>

                <!-- Number of Credits -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-star text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.credits" | translate }}
                    </label>
                    <p class="mt-2 text-base text-gray-900 dark:text-gray-100">
                        {{
                            paymentDetail.numberOfCredits ||
                                ("paymentDetail.fallback.na" | translate)
                        }}
                    </p>
                </div>

                <!-- Account Name -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-user text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.accountName" | translate }}
                    </label>
                    <p class="mt-2 text-base text-gray-900 dark:text-gray-100">
                        {{
                            paymentDetail.accountName ||
                                ("paymentDetail.fallback.na" | translate)
                        }}
                    </p>
                </div>

                <!-- Account Number -->
                <div
                    class="rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-id-card text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.accountNumber" | translate }}
                    </label>
                    <p class="mt-2 text-base text-gray-900 dark:text-gray-100">
                        {{
                            paymentDetail.accountNumber ||
                                ("paymentDetail.fallback.na" | translate)
                        }}
                    </p>
                </div>

                <!-- Enterprise Info -->
                <div
                    class="col-span-1 rounded-xl bg-gray-50 p-4 transition-shadow hover:shadow-md sm:col-span-2 dark:bg-gray-700"
                >
                    <label
                        class="flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300"
                    >
                        <i
                            class="pi pi-building text-indigo-600 dark:text-indigo-400"
                        ></i>
                        {{ "paymentDetail.labels.enterprise" | translate }}
                    </label>
                    <p class="mt-2 text-base text-gray-900 dark:text-gray-100">
                        <ng-container
                            *ngIf="
                                paymentDetail.enterpriseDTO;
                                else noEnterprise
                            "
                        >
                            <span class="flex items-center gap-2">
                                <i
                                    class="pi pi-tag text-sm text-indigo-500 dark:text-indigo-300"
                                ></i>
                                {{ "paymentDetail.labels.name" | translate }}:
                                {{
                                    paymentDetail.enterpriseDTO.name ||
                                        ("paymentDetail.fallback.na"
                                            | translate)
                                }}
                            </span>
                            <br />
                            <span class="flex items-center gap-2">
                                <i
                                    class="pi pi-envelope text-sm text-indigo-500 dark:text-indigo-300"
                                ></i>
                                Email:
                                {{
                                    paymentDetail.enterpriseDTO.email ||
                                        ("paymentDetail.fallback.na"
                                            | translate)
                                }}
                            </span>
                            <br />
                            <span class="flex items-center gap-2">
                                <i
                                    class="pi pi-phone text-sm text-indigo-500 dark:text-indigo-300"
                                ></i>
                                {{
                                    "paymentDetail.labels.hotline" | translate
                                }}:
                                {{
                                    paymentDetail.enterpriseDTO.hotline ||
                                        ("paymentDetail.fallback.na"
                                            | translate)
                                }}
                            </span>
                        </ng-container>
                        <ng-template #noEnterprise>
                            {{ "paymentDetail.fallback.na" | translate }}
                        </ng-template>
                    </p>
                </div>
            </div>
        </ng-container>
    </div>
</div>
