<table-template
  *ngIf="!applicationService.isMobile()"
  [fetch]="fetchProducts"
  [columns]="cols"
  [criteria]="productCriteria"
  [captionTemplateRef]="captionTemplateRef"
  [triggerSearch]="searchEvent"
  [checkbox]="true"
  (selectionChange)="onSelectionChange($event)">
  <ng-template #captionTemplateRef>
    <div class="flex items-center justify-between">
      <div class="flex gap-2.5">
        <p-iconfield>
          <p-inputicon styleClass="pi pi-search"/>
          <input [(ngModel)]="productCriteria.criteria" type="text" pInputText placeholder="Search" (keydown.enter)="search()"/>
        </p-iconfield>
        <p-button severity="primary" label="Search" icon="pi pi-user-plus" outlined (onClick)="search()"/>
      </div>
      <div class="flex gap-2.5">
        <p-button severity="danger"
                  [label]="selectedProducts && selectedProducts.length
                  ? 'Delete (' + selectedProducts?.length + ') products'
                  : 'Delete'"
                  icon="pi pi-trash"
                  outlined
                  [disabled]="!selectedProducts || !selectedProducts.length"
                  (onClick)="confirmDelete()"
        />
        <p-button severity="primary" label="Add product" icon="pi pi-user-plus"/>
      </div>
    </div>
  </ng-template>
  <ng-template #actionsTemplate let-product>
    <p-button icon="pi pi-ellipsis-v" [rounded]="true" [text]="true" severity="contrast"/>
  </ng-template>
</table-template>
